# 1.1 类型

## 布尔值

因为PHP弱类型的特性，解释器总是能善解人意的帮我们转换数据类型，总在那么不经意的一瞬间，它默默的帮我们做了很多事情，特别是在阅读别人的代码的时候，你会看到无数奇怪的判断，特别是在需要布尔值的时候。记住PHP的转换机制非常重要，能让我们写出简洁而漂亮的代码。下面引用文档中的原话：

> 当转换为 boolean  时，以下值被认为是 FALSE:
> 1. 布尔值 FALSE  本身
> 2. 整型值 0（零）
> 3. 浮点型值 0.0（零）
> 4. 空字符串，以及字符串 "0"
> 5. 不包括任何元素的数组
> 6. 不包括任何成员变量的对象（仅 PHP 4.0 适用）
> 7. 特殊类型 NULL（包括尚未赋值的变量）
> 8. 从空标记生成的 SimpleXML 对象

## 整型

> PHP 不支持无符号整数  
> PHP 不支持无符号整数  
> PHP 不支持无符号整数  

重要的事情说三遍，我是吃过这亏滴。当然这不丢人，反正大家都没看见。有时写程序过程中可能就忘了，从其他地方接收来的数据，有可能出现这种溢出错误。我当时出现的问题就是，对接收来的一个数字进行了强制类型转换，本身这是一个习惯操作，经常这样做。没太多想。那是一个id数据，大家应该知道这个意义，我们还要通过这个数据取回特定的记录。就在我取回数据的时候，我发现总是同一条记录。我的天呐！发生了什么？简直崩溃了。先检查程序，都没错啊。又去看数据库，id字段全是清一色2147483647（先不要讨论数据唯一性问题）。我就意识到，肯定是溢出了。改掉程序就好了。

有人可能会问，数据库不会溢出吗？我设置了bigint而且是无符号的。再设计数据库的时候考虑到这个问题了，写程序的时候就忘记这个了。幸好正式上线的时候，老板不知道中间曲折的经历。

这在开发中其实是一件小事儿，不经意间会遇到。这时候不要慌神，也不需要去问搜索引擎，只需要一步一步的检查，这样不断的做，你解决问题的能力才会提高。如果此时放弃求索的机会，你将只愿意依赖别人帮你解决问题。对于开发来说这不是个好现象。

> 整型数的字长和平台有关，尽管通常最大值是大约二十亿（32 位有符号）。64 位平台下的最大值通常是大约 9E18。

## 浮点数

不到万不得已，不要用浮点数，特别是用浮点数来做比较。

有趣的陷阱,在命令行输入以下命令会看到有趣的结果:
```
php -r "echo (int)((0.1+0.7)*10);"
```